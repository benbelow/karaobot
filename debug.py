import xml.etree.ElementTree as ET

raw_xml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<response status=\"OK\">    \n<song id=\"14236\" len=\"306\" pop=\"0.92601031677159\" bgcolor=\"931612\" nbStreams=\"256543\" preview=\"1\" preview-len=\"46\"><title>Zombie</title><artist id=\"2553\">The Cranberries</artist><year>1994</year><imagePath>https://cdnaws.recis.io/i/img/00/52/d1/92_945039_sq100.jpg</imagePath><stream>https://c17.recis.io/sl/59c86f66ae/242b3354be2b36905534ddc48063fdb1/nbv-bv_hq_pv.mp4</stream><filemtime>1654247715</filemtime><filesize>449513</filesize><md5>242b3354be2b36905534ddc48063fdb1</md5><previewstartsec>186</previewstartsec><legal><item id=\"1\" type=\"writing\">Dolores Mary O&amp;#039;Riordan</item><item id=\"2\" type=\"publishing\">Island Music Ltd / Universal Music Publishing Limited (GB)</item></legal><styles>2,39</styles></song><karaoke version=\"1.0\" producer=\"Recisio\"><page id=\"1\" activecolor=\"#05A91E\" inactivecolor=\"#FFFFFF\" activebordercolor=\"#000000\" inactivebordercolor=\"#000000\" kfntrackid=\"7\"><fadeinstart>00:00:-3,-700</fadeinstart><fadeinduration>00:00:00,600</fadeinduration><fadeoutstart>00:00:01,120</fadeoutstart><fadeoutduration>00:00:00,600</fadeoutduration><line id=\"1\"><position x=\"191.50\" width=\"257\" y=\"240.50\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:-2,-500</start><end>00:00:-2,-150</end><text>they</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:-2,-150</start><end>00:00:-1,-790</end><text>are</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:-1,-790</start><end>00:00:-1,-430</end><text>dy</text></syllabe><syllabe><start>00:00:-1,-430</start><end>00:00:00,-350</end><text>ing</text></syllabe></word></line></page><page id=\"2\" activecolor=\"#05A91E\" inactivecolor=\"#FFFFFF\" activebordercolor=\"#000000\" inactivebordercolor=\"#000000\" kfntrackid=\"7\"><fadeinstart>00:00:00,-520</fadeinstart><fadeinduration>00:00:00,600</fadeinduration><fadeoutstart>00:00:10,750</fadeoutstart><fadeoutduration>00:00:00,350</fadeoutduration><line id=\"2\"><position x=\"80.00\" width=\"480\" y=\"120.90\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:00,680</start><end>00:00:01,040</end><text>In</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:01,040</start><end>00:00:01,390</end><text>your</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:01,390</start><end>00:00:03,040</end><text>head,</text></syllabe></word><word id=\"4\"><syllabe><start>00:00:03,580</start><end>00:00:03,940</end><text>in</text></syllabe></word><word id=\"5\"><syllabe><start>00:00:03,940</start><end>00:00:04,300</end><text>your</text></syllabe></word><word id=\"6\"><syllabe><start>00:00:04,300</start><end>00:00:05,750</end><text>head</text></syllabe></word></line><line id=\"3\"><position x=\"97.50\" width=\"445\" y=\"180.70\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:06,110</start><end>00:00:06,820</end><text>zom</text></syllabe><syllabe><start>00:00:06,820</start><end>00:00:07,170</end><text>bie,</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:07,530</start><end>00:00:08,250</end><text>zom</text></syllabe><syllabe><start>00:00:08,250</start><end>00:00:08,600</end><text>bie,</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:08,960</start><end>00:00:09,680</end><text>zom</text></syllabe><syllabe><start>00:00:09,680</start><end>00:00:10,040</end><text>bie</text></syllabe></word></line></page><page id=\"3\" activecolor=\"#05A91E\" inactivecolor=\"#FFFFFF\" activebordercolor=\"#000000\" inactivebordercolor=\"#000000\" kfntrackid=\"7\"><fadeinstart>00:00:09,200</fadeinstart><fadeinduration>00:00:00,600</fadeinduration><fadeoutstart>00:00:12,420</fadeoutstart><fadeoutduration>00:00:00,600</fadeoutduration><line id=\"4\"><position x=\"244.00\" width=\"152\" y=\"240.50\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:10,400</start><end>00:00:10,750</end><text>hey,</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:11,110</start><end>00:00:11,460</end><text>hey</text></syllabe></word></line></page><page id=\"4\" activecolor=\"#05A91E\" inactivecolor=\"#FFFFFF\" activebordercolor=\"#000000\" inactivebordercolor=\"#000000\" kfntrackid=\"7\"><fadeinstart>00:00:11,110</fadeinstart><fadeinduration>00:00:00,350</fadeinduration><fadeoutstart>00:00:18,150</fadeoutstart><fadeoutduration>00:00:00,600</fadeoutduration><line id=\"5\"><position x=\"140.00\" width=\"360\" y=\"120.90\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:11,820</start><end>00:00:12,170</end><text>What's</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:12,170</start><end>00:00:12,530</end><text>in</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:12,530</start><end>00:00:12,890</end><text>your</text></syllabe></word><word id=\"4\"><syllabe><start>00:00:12,890</start><end>00:00:14,690</end><text>head</text></syllabe></word></line><line id=\"6\"><position x=\"207.00\" width=\"226\" y=\"180.70\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:15,040</start><end>00:00:15,400</end><text>in</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:15,400</start><end>00:00:15,760</end><text>your</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:15,760</start><end>00:00:17,190</end><text>head</text></syllabe></word></line></page><page id=\"5\" activecolor=\"#05A91E\" inactivecolor=\"#FFFFFF\" activebordercolor=\"#000000\" inactivebordercolor=\"#000000\" kfntrackid=\"7\"><fadeinstart>00:00:16,350</fadeinstart><fadeinduration>00:00:00,600</fadeinduration><fadeoutstart>00:00:24,090</fadeoutstart><fadeoutduration>00:00:00,600</fadeoutduration><line id=\"7\"><position x=\"95.50\" width=\"449\" y=\"240.50\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:17,550</start><end>00:00:18,260</end><text>Zom</text></syllabe><syllabe><start>00:00:18,260</start><end>00:00:18,610</end><text>bie,</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:18,970</start><end>00:00:19,680</end><text>zom</text></syllabe><syllabe><start>00:00:19,680</start><end>00:00:20,030</end><text>bie,</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:20,390</start><end>00:00:21,090</end><text>zom</text></syllabe><syllabe><start>00:00:21,090</start><end>00:00:21,440</end><text>bie</text></syllabe></word></line><line id=\"8\"><position x=\"199.50\" width=\"241\" y=\"300.30\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:21,780</start><end>00:00:22,120</end><text>hey,</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:22,460</start><end>00:00:22,800</end><text>hey,</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:23,140</start><end>00:00:23,480</end><text>hey</text></syllabe></word></line></page><page id=\"6\" activecolor=\"#05A91E\" inactivecolor=\"#FFFFFF\" activebordercolor=\"#000000\" inactivebordercolor=\"#000000\" kfntrackid=\"7\"><fadeinstart>00:00:22,290</fadeinstart><fadeinduration>00:00:00,600</fadeinduration><fadeoutstart>00:00:27,990</fadeoutstart><fadeoutduration>00:00:00,600</fadeoutduration><line id=\"9\"><position x=\"154.50\" width=\"331\" y=\"180.70\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:23,830</start><end>00:00:24,170</end><text>Oh,</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:24,540</start><end>00:00:24,900</end><text>oh,</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:25,270</start><end>00:00:25,630</end><text>oh,</text></syllabe></word><word id=\"4\"><syllabe><start>00:00:25,990</start><end>00:00:26,340</end><text>oh,</text></syllabe></word><word id=\"5\"><syllabe><start>00:00:26,690</start><end>00:00:27,030</end><text>oh</text></syllabe></word></line></page><page id=\"7\" activecolor=\"#05A91E\" inactivecolor=\"#FFFFFF\" activebordercolor=\"#000000\" inactivebordercolor=\"#000000\" kfntrackid=\"7\"><fadeinstart>00:00:26,190</fadeinstart><fadeinduration>00:00:00,600</fadeinduration><fadeoutstart>00:00:36,570</fadeoutstart><fadeoutduration>00:00:00,600</fadeoutduration><line id=\"10\"><position x=\"98.00\" width=\"444\" y=\"240.50\" height=\"52\"/><word id=\"1\"><syllabe><start>00:00:27,390</start><end>00:00:27,750</end><text>oh,</text></syllabe></word><word id=\"2\"><syllabe><start>00:00:28,110</start><end>00:00:28,470</end><text>oh,</text></syllabe></word><word id=\"3\"><syllabe><start>00:00:28,830</start><end>00:00:29,560</end><text>hey</text></syllabe></word><word id=\"4\"><syllabe><start>00:00:29,560</start><end>00:00:32,050</end><text>oh,</text></syllabe></word><word id=\"5\"><syllabe><start>00:00:32,050</start><end>00:00:32,410</end><text>ah</text></syllabe></word><word id=\"6\"><syllabe><start>00:00:32,410</start><end>00:00:32,760</end><text>ah</text></syllabe></word><word id=\"7\"><syllabe><start>00:00:32,760</start><end>00:00:35,520</end><text>ah</text></syllabe></word></line></page><event id=\"1\"><start>00:00:00,000</start><bgcolor>931612</bgcolor></event><event id=\"2\"><start>00:00:01,390</start><bump/></event><event id=\"3\"><start>00:00:12,890</start><bump/></event><event id=\"4\"><start>00:00:13,480</start><bgcolor>C73613</bgcolor></event><event id=\"5\"><start>00:00:14,680</start><bgcolor>911610</bgcolor></event><event id=\"6\"><start>00:00:24,170</start><bump/></event><event id=\"7\"><start>00:00:35,520</start><bump/></event></karaoke>    </response>"

root = ET.fromstring(raw_xml)

karaoke = [x for x in root if x.tag == "karaoke"][0]
pages = [x for x in karaoke if x.tag == "page"]

original_lyrics = ""
original_lyrics_by_line_id = {}

for page in pages:
    lines = [x for x in page if x.tag == "line"]
    for line in lines:
        line_id = int(line.get("id"))
        if line_id not in original_lyrics_by_line_id:
            original_lyrics_by_line_id[line_id] = ""
        words = [x for x in line if x.tag == "word"]
        for word in words:

            syllables = [x for x in word if x.tag == "syllabe"]
            start = syllables[0].find("start").text
            end = syllables[-1].find("end").text
            full_word = "".join([s.find("text").text for s in syllables])

            for si in range(len(syllables)):
                word.remove(syllables[si])

            newSyllable = ET.Element("syllabe")
            newStart = ET.Element("start")
            newStart.text = start
            newEnd = ET.Element("end")
            newEnd.text = end
            newText = ET.Element("text")
            newText.text = full_word
            newSyllable.append(newStart)
            newSyllable.append(newEnd)
            newSyllable.append(newText)

            word.append(newSyllable)

            original_lyrics += full_word
            original_lyrics += " "
            original_lyrics_by_line_id[line_id] += full_word
            original_lyrics_by_line_id[line_id] += " "
        original_lyrics += "\n"

for k in original_lyrics_by_line_id:
    print(k)
    print(original_lyrics_by_line_id[k])
print(ET.tostring(root))